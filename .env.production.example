# ============================================================================
# Whisper â€” Production Environment Configuration
# ============================================================================
# Copy this file to .env.production and replace every CHANGE_ME_* placeholder
# with a real secret before deploying.
#
# Usage:
#   cp .env.production.example .env.production
#   docker compose --env-file .env.production -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# WARNING: Never commit the filled-in .env.production file to version control.
# ============================================================================

# --- PostgreSQL ---
POSTGRES_DB=whisper
POSTGRES_USER=whisper_prod
POSTGRES_PASSWORD=CHANGE_ME_postgres_password   # Use a strong random password (32+ chars)

# --- Redis ---
REDIS_ADDR=redis:6379

# --- NATS ---
NATS_URL=nats://nats:4222

# --- WebSocket Server (wsserver) ---
LISTEN_ADDR=:8080
DATABASE_URL=postgres://whisper_prod:CHANGE_ME_postgres_password@postgres:5432/whisper?sslmode=disable
SERVER_NAME=ws-prod-1                           # Unique name per instance for session namespacing
WORKER_POOL_SIZE=512                            # Tune based on available CPU cores
MAX_CONNECTIONS=100000                          # Tune based on available memory (~2 KB per conn)
READ_TIMEOUT=10s
WRITE_TIMEOUT=10s

# --- Frontend (Vite build args) ---
# Replace with your actual domain. Use wss:// and https:// for TLS.
VITE_WS_URL=wss://chat.example.com/ws
VITE_API_URL=https://chat.example.com

# --- Grafana ---
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_grafana_password
GF_USERS_ALLOW_SIGN_UP=false
